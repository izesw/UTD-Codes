name: Codes to JSON

on: [push, pull_request, workflow_dispatch]

jobs:
  run:
    name: Encode to JSON
    runs-on: ubuntu-latest
    timeout-minutes: 2
    
    steps:
    - name: Checkout Project
      uses: actions/checkout@v4

    - name: Install Luau
      uses: EncodedVenom/install-luau@v3

    - name: Convert to JSON
      id: run_tests
      run: |
          output=$(luau translation/translatecodes.luau)
          echo "$output"
    
    - name: Send JSON to file
      uses: devops-actions/json-to-file@v1.0.0
      with:
        json: "$output"
        filename: 'test.json'